# Server-side game configuration
game:
  # The rate at which the game loop runs, in ticks per second.
  tick_rate: 20
  
  # Interval in ticks between batch database syncs.
  # All gameplay data (inventory, equipment, skills, ground items) is cached in
  # Valkey and batch-written to PostgreSQL at this interval.
  # 200 ticks at 20 TPS = sync every 10 seconds
  # Lower values = more frequent saves, higher DB load
  # Higher values = less DB load, more data loss on crash
  db_sync_interval_ticks: 200
  
  # Movement configuration
  movement:
    # Minimum time between moves in seconds (prevents spam)
    move_cooldown: 0.15  # 150ms = ~6.7 moves per second max
    # Duration of movement animation on client
    animation_duration: 0.3

  # HP regeneration configuration
  hp_regen:
    # Interval in ticks between HP regeneration (1 HP per interval)
    # At 20 TPS: 200 ticks = 10 seconds
    interval_ticks: 200
  
  # Death and respawn configuration
  death:
    # Time in seconds before player respawns after death
    respawn_delay: 5
  
  # Default spawn configuration for new players
  spawn:
    map_id: "samplemap"
    x: 25
    y: 25

  # Chat system configuration
  chat:
    global:
      enabled: true
      allowed_roles: ["ADMIN", "MODERATOR"]  # Roles that can send global messages
    max_message_length:
      local: 280      # Local chat character limit
      global: 200     # Global chat character limit (shorter to prevent spam)
      dm: 500         # Direct message character limit
    rate_limits:
      local: 1.0      # Seconds between local messages
      global: 5.0     # Seconds between global messages
      dm: 0.5         # Seconds between DMs
    local_chunk_radius: 2  # Chunks radius for local chat (32 tile radius with 16x16 chunks)

  # Security and rate limiting configuration
  security:
    # Maximum length of chat messages (longer messages are truncated) - DEPRECATED: Use chat.max_message_length instead
    chat_max_message_length: 500
    # Minimum time between inventory operations (move, sort, drop, pickup) in seconds
    inventory_operation_cooldown: 0.1
    # Minimum time between equipment operations (equip, unequip) in seconds
    equipment_operation_cooldown: 0.1

  # Authentication/session configuration
  auth:
    # How long access tokens are valid (in minutes)
    access_token_expire_minutes: 30

  # Skills configuration
  skills:
    # Maximum level a skill can reach
    max_level: 99
    
    # Default XP multiplier for skills not explicitly configured
    # 1.0 = standard RuneScape curve (~13M XP to level 99)
    default_xp_multiplier: 1.0
    
    # Per-skill XP multipliers
    # Lower values = faster leveling, Higher values = slower leveling
    # Examples:
    #   0.5 = ~6.5M XP to 99 (twice as fast)
    #   1.0 = ~13M XP to 99 (standard)
    #   2.0 = ~26M XP to 99 (twice as slow)
    xp_multipliers:
      # Combat skills
      attack: 1.0
      strength: 1.0
      defence: 1.0
      hitpoints: 1.0
      # Gathering skills (slightly faster progression)
      mining: 0.8
      fishing: 0.8
      woodcutting: 0.8
      # Crafting skills
      cooking: 0.7
      crafting: 1.0

  # Inventory configuration
  inventory:
    # Number of inventory slots per player
    max_slots: 28

  # Equipment and durability configuration
  equipment:
    # How much durability is lost per combat action
    durability_loss_per_hit: 1
    # Repair cost = item_value * multiplier * damage_percent
    repair_cost_multiplier: 0.1

  # Ground items configuration
  ground_items:
    # Despawn times in seconds (item disappears from ground)
    # Based on item rarity - rarer items last longer
    despawn_times:
      poor: 60        # 1 minute
      common: 120     # 2 minutes
      uncommon: 180   # 3 minutes
      rare: 300       # 5 minutes
      epic: 600       # 10 minutes
      legendary: 900  # 15 minutes
    
    # Loot protection times in seconds
    # During this time, only the player who dropped the item can pick it up
    # After this time, anyone can pick it up (first come first serve)
    loot_protection_times:
      poor: 30        # 30 seconds
      common: 45      # 45 seconds
      uncommon: 60    # 1 minute
      rare: 90        # 1.5 minutes
      epic: 120       # 2 minutes
      legendary: 180  # 3 minutes
    
    # How often the cleanup task runs to remove expired items (seconds)
    cleanup_interval: 30

# Server infrastructure settings
server:
  # Valkey (Redis-compatible) connection settings
  valkey:
    host: "valkey"
    port: 6379
